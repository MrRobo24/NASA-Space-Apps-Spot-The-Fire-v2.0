<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Fyre</title>
    <link rel="stylesheet" type="text/css" href="styles/inline.css">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon"/>
    <link rel="manifest" href="manifest.json">
</head>
<body>
<div id="bubble">
    <div>
        <h3 class="title" id="title">NEWS</h3>
        <h3 class="title2" id="title2">4:20pm</h3>
    </div>
    <div id="scrollable_bubble"></div>
</div>
<main class="main">
    <div id="crosshair">+</div>
    <div id="googleMap" style="width:100%;height:100%;"></div>

    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC24s5UrWB7uiAPHImehxTb-5kaidfpZpk&libraries=visualization"></script>

    <script>
        /* Data points defined as a mixture of WeightedLocation and LatLng objects */
        var heatMapData = [
            {location: new google.maps.LatLng(37.782, -122.447), weight: 0.5},
            new google.maps.LatLng(37.782, -122.445),
            {location: new google.maps.LatLng(37.782, -122.443), weight: 2},
            {location: new google.maps.LatLng(37.782, -122.441), weight: 3},
            {location: new google.maps.LatLng(37.782, -122.439), weight: 2},
            new google.maps.LatLng(37.782, -122.437),
            {location: new google.maps.LatLng(37.782, -122.435), weight: 0.5},

            {location: new google.maps.LatLng(37.785, -122.447), weight: 3},
            {location: new google.maps.LatLng(37.785, -122.445), weight: 2},
            new google.maps.LatLng(37.785, -122.443),
            {location: new google.maps.LatLng(37.785, -122.441), weight: 0.5},
            new google.maps.LatLng(37.785, -122.439),
            {location: new google.maps.LatLng(37.785, -122.437), weight: 2},
            {location: new google.maps.LatLng(37.785, -122.435), weight: 3}
        ];

        var sanFrancisco = new google.maps.LatLng(37.774546, -122.433523);

        map = new google.maps.Map(document.getElementById('googleMap'), {
            center: sanFrancisco,
            zoom: 13,
            mapTypeId: 'satellite',
            zoomControl: false,
            mapTypeControl: false,
            streetViewControl: false,
            fullscreenControl: false
        });

        heatmap = new google.maps.visualization.HeatmapLayer({
            data: heatMapData,
            dissipating: false
        });
        heatmap.setMap(map);

        function addHeatMapData() {
            //
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                    heatmap_data = JSON.parse(xhttp.responseText);
                    heatmap_data_object = [];
                    for (let key in heatmap_data) {
                        datum = heatmap_data[key];
                        heatmap_data_object.push({
                            location: new google.maps.LatLng(datum[0], datum[1]),
                            weight: datum[2]
                        })
                    }
                    heatmap.setOptions({data: heatmap_data_object});
                    console.log(heatmap_data)
                }
            };
            xhttp.open("GET", "/api/fire_data", true);
            xhttp.send();
        }
    </script>


    <div id="addDialogContainer">
        <div class="dialog">
            <div class="dialog-title">Add new city</div>
            <div class="dialog-body">
                <select id="selectCityToAdd" aria-label="City to add">
                    <!--
                      Values are lat/lon values, use Google Maps to find and add
                      additional cities.
                    -->
                    <option value="28.6472799,76.8130727">Dehli, India</option>
                    <option value="-5.7759362,106.1174957">Jakarta, Indonesia</option>
                    <option value="51.5287718,-0.2416815">London, UK</option>
                    <option value="40.6976701,-74.2598666">New York, USA</option>
                    <option value="48.8589507,2.2770202">Paris, France</option>
                    <option value="-64.8251018,-63.496847">Port Lockroy, Antarctica</option>
                    <option value="37.757815,-122.5076401">San Francisco, USA</option>
                    <option value="31.2243085,120.9162955">Shanghai, China</option>
                    <option value="35.6735408,139.5703032">Tokyo, Japan</option>
                </select>
            </div>
            <div class="dialog-buttons">
                <button id="butDialogCancel" class="button">Cancel</button>
                <button id="butDialogAdd" class="button">Add</button>
            </div>
        </div>
    </div>

    <div id="buttons">
        <div class="button_group bl">
            <div>
                <button class="small_button b1" style="bottom: 20px;" onclick="showMessages()"><img
                        src="images/icons/message.svg" style="width: 18px; height: 18px; margin-top: 10px;"></button>
                <button class="small_button b2" style="bottom: 20px;"><img
                        src="images/icons/lifebuoy.svg" style="width: 18px; height: 18px; margin-top: 10px;"></button>
                <button class="small_button b3" style="bottom: 20px;"><img
                        src="images/icons/home-group.svg" style="width: 18px; height: 18px; margin-top: 10px;"></button>
            </div>
            <button class="big_button" onclick="buttonClick(this)"><img src="images/icons/account-group.svg"
                                                                        style="width: 36px; height: 36px; margin-top: 12px;">
            </button>
        </div>
        <div class="button_group bc">
            <button class="big_button" onclick='openPopupPage("Report fire", "Reporting", "pages/report.html")'><img
                    src="images/icons/fire.svg"
                    style="width: 64px; height: 64px; margin-top: 12px;">
            </button>
        </div>
        <div class="button_group br">
            <div>
                <button class="small_button b1" style="bottom: 20px;" onclick='openPopupPage("Contents", "Information", "pages/info-contents.html")'><img
                        src="images/icons/information.svg" style="width: 18px; height: 18px; margin-top: 10px;">
                </button>
                <button class="small_button b2" style="bottom: 20px;"><img
                        src="images/icons/directions-fork.svg" style="width: 18px; height: 18px; margin-top: 10px;">
                </button>
                <button class="small_button b3" style="bottom: 20px;"><img
                        src="images/icons/settings.svg" style="width: 18px; height: 18px; margin-top: 10px;"></button>
            </div>
            <button class="big_button" onclick="buttonClick(this)"><img src="images/icons/tools.svg"
                                                                        style="width: 36px; height: 36px; margin-top: 12px;">
            </button>
        </div>
    </div>

    <script src="index.js"></script>
    <script src="scripts/luxon-1.11.4.js"></script>
    <script src="scripts/app.js"></script>
</body>
</html>
